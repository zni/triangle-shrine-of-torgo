<html>
    <head>
        <script type="text/javascript" src="util/rand.js"></script>
        <script type="text/javascript" src="util/colorpicker.js"></script>
        <script type="text/javascript" src="patterns/bars.js"></script>
    <style>
    canvas {
        padding: 0;
        margin: auto;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        border-style: solid;
        border-width: 1px;
        border-color: #666;
    }
    </style>
    </head>
    <body bgcolor="#333">
        <input id="speed" type="range" min="10" max="200" step="1"></input>
        <input id="noise" type="checkbox">Noise</input>
        <input id="rlength" type="checkbox">Random Length</input>
        <canvas id="foo" width="200" height="100">
        Your browser does not support the HTML5 canvas tag.
        </canvas>

        <script>
            var interval;
            var c = document.getElementById("foo");
            //var max_height = screen.height;
            //var max_width = screen.width;
            var max_height = 500;
            var max_width = 900;
            c.width = max_width;
            c.height = max_height;
            var ctx = c.getContext("2d");

            var speed = document.getElementById("speed");
            var noise = document.getElementById("noise");
            var randomLength = document.getElementById("rlength");
            var bars = new Bars(ctx,
                                max_width,
                                max_height,
                                yargh,
                                20,
                                randomLength.checked,
                                noise.checked);
            interval = setInterval(bars.run.bind(bars), speed.valueAsNumber);

            speed.addEventListener("change",
                                function (e) {
                                    clearInterval(interval);
                                    new_speed = speed.valueAsNumber;
                                    interval = setInterval(bars.run.bind(bars), new_speed);
                                },
                                true);

            noise.addEventListener("change",
                                   function (e) {
                                        bars.enableNoise = noise.checked;
                                    },
                                    true);

            randomLength.addEventListener("change",
                                          function (e) {
                                               bars.randLength = rlength.checked;
                                               console.log('bars.randLength:', bars.randLength);
                                           },
                                           true);
        </script>

    </body>
</html>
